import{j as e,B as d,T as S,u as F,a as T,r as A,b as y,s as U,L as m,R as b,I as f,c as P,d as v,p as k,A as I,e as D}from"./index-DZueDDJj.js";import{z as i,u as L,F as l,L as E,a as C,t as q}from"./form-provider-sd5uen5K.js";function B({sx:s,icon:r,title:n,description:a,...t}){return e.jsxs(e.Fragment,{children:[r&&e.jsx(d,{component:"span",display:"inline-flex",sx:{mx:"auto",mb:3},children:r}),e.jsxs(d,{gap:1.5,display:"flex",flexDirection:"column",sx:{mb:5,textAlign:"center",whiteSpace:"pre-line",...s},...t,children:[e.jsx(S,{variant:"h5",children:n}),a&&e.jsx(S,{variant:"body2",sx:{color:"text.secondary"},children:a})]})]})}const M=i.object({email:i.string().min(1,{message:"Email is required!"}),password:i.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function J(){const s=F(),{checkUserSession:r}=T(),[n,a]=A.useState(""),t=y(),c={email:"rh",password:"rh123456"},u=L({resolver:q(M),defaultValues:c}),{handleSubmit:p,formState:{isSubmitting:g}}=u,j=p(async x=>{try{await U({username:x.email,password:x.password}),await(r==null?void 0:r()),s.refresh()}catch(o){console.error(o),a(typeof o=="string"?o:o.message)}}),w=e.jsxs(d,{gap:3,display:"flex",flexDirection:"column",children:[e.jsx(l.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsxs(d,{gap:1.5,display:"flex",flexDirection:"column",children:[e.jsx(m,{component:b,href:"#",variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(l.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:t.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(P,{onClick:t.onToggle,edge:"end",children:e.jsx(v,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),e.jsx(E,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:g,loadingIndicator:"Sign in...",children:"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Sign in to your account",description:e.jsxs(e.Fragment,{children:["Donâ€™t have an account? ",e.jsx(m,{component:b,href:k.auth.jwt.signUp,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),e.jsxs(I,{severity:"info",sx:{mb:3},children:["Use ",e.jsx("strong",{children:c.email})," with password ",e.jsx("strong",{children:c.password})]}),!!n&&e.jsx(I,{severity:"error",sx:{mb:3},children:n}),e.jsx(C,{methods:u,onSubmit:j,children:w})]})}function R({sx:s,...r}){return e.jsxs(d,{component:"span",sx:{mt:3,display:"block",textAlign:"center",typography:"caption",color:"text.secondary",...s},...r,children:["By signing up, I agree to ",e.jsx(m,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",e.jsx(m,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]})}const V=i.object({username:i.string().min(1,{message:"Username is required!"}),email:i.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:i.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:i.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})}).refine(s=>s.password===s.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function W(){const{checkUserSession:s}=T(),r=F(),n=y(),a=y(),[t,c]=A.useState(""),u={username:"rh",email:"ruanhan24@outlook.com",password:"rh123456",confirmPassword:"rh123456"},p=L({resolver:q(V),defaultValues:u}),{handleSubmit:g,formState:{isSubmitting:j}}=p,w=g(async o=>{try{await D({email:o.email,password:o.password,username:o.username}),await(s==null?void 0:s()),r.refresh()}catch(h){console.error(h),c(typeof h=="string"?h:h.message)}}),x=e.jsxs(d,{gap:3,display:"flex",flexDirection:"column",children:[e.jsx(l.Text,{name:"username",label:"User name",InputLabelProps:{shrink:!0}}),e.jsx(l.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsx(l.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:n.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(P,{onClick:n.onToggle,edge:"end",children:e.jsx(v,{icon:n.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(l.Text,{name:"confirmPassword",label:"Confirm password",placeholder:"6+ characters",type:a.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(P,{onClick:a.onToggle,edge:"end",children:e.jsx(v,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(E,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:j,loadingIndicator:"Create account...",children:"Create account"})]});return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Get started absolutely free",description:e.jsxs(e.Fragment,{children:["Already have an account? ",e.jsx(m,{component:b,href:k.auth.jwt.signIn,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!t&&e.jsx(I,{severity:"error",sx:{mb:3},children:t}),e.jsx(C,{methods:p,onSubmit:w,children:x}),e.jsx(R,{})]})}export{J,W as a};
